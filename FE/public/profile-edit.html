<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>책갈피 - 회원정보수정</title>
    <link rel="stylesheet" href="./assets/css/profile-edit.css" />
  </head>

  <body>
    <header class="site-header">
      <div class="header-inner">
        <h1 class="brand">
          <a href="./board.html">책갈피</a>
        </h1>

        <div class="avatar-wrap" id="avatarWrap">
          <button
            class="avatar"
            id="avatarBtn"
            aria-haspopup="menu"
            aria-expanded="false"
            aria-label="프로필 메뉴"
          >
            🐧
          </button>

          <nav
            class="menu"
            id="profileMenu"
            role="menu"
            aria-label="프로필 메뉴"
          >
            <a href="./profile-edit.html" role="menuitem">회원정보수정</a>
            <a href="./password-edit.html" role="menuitem">비밀번호수정</a>
            <button type="button" class="menu-logout" role="menuitem">
              로그아웃
            </button>
          </nav>
        </div>
      </div>
    </header>

    <main class="layout">
      <section class="page">
        <h2 class="page-title">회원정보수정</h2>

        <section class="section profile">
          <p class="field-label">프로필 사진 <span class="req"></span></p>
          <p class="helper error"><span class="star"></span> helper text</p>

          <label class="avatar-uploader">
            <input type="file" accept="image/*" hidden />
            <img
              src="https://placehold.co/200x200/aaaaaa/ffffff?text=%20"
              alt="프로필 미리보기"
            />
            <span class="badge">변경</span>
          </label>
        </section>

        <form class="form" autocomplete="off">
          <div class="field">
            <label class="input-label">이메일</label>
            <p class="readonly">startupcode@gmail.com</p>
          </div>

          <div class="field">
            <label for="nick" class="input-label">닉네임</label>
            <div class="row">
              <input id="nick" type="text" placeholder="닉네임을 입력하세요" />
            </div>
          </div>

          <button type="button" class="btn primary block">수정하기</button>
          <button type="button" class="link danger">회원 탈퇴</button>
          <button type="button" class="btn primary pill">완료</button>
        </form>
      </section>
    </main>

    <script>
      (function () {
        const wrap = document.getElementById("avatarWrap");
        const btn = document.getElementById("avatarBtn");

        function closeMenu() {
          wrap.classList.remove("open");
          btn.setAttribute("aria-expanded", "false");
        }

        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          const opened = wrap.classList.toggle("open");
          btn.setAttribute("aria-expanded", String(opened));
        });

        document.addEventListener("click", (e) => {
          if (!wrap.contains(e.target)) closeMenu();
        });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") closeMenu();
        });
      })();
    </script>

    <script type="module" src="./assets/js/pages/profile-edit.js"></script>
  </body>
</html>
